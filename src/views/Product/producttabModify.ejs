<%-include("../Home/header")-%>


  <div class="flex ">
    <%-include("../Home/sidebar")-%>
      <!-- main star -->
      <main class="bg-custom4-700 w-11/12  bg-Pattren2 ">
        <div id="Customer" class=" w-full h-full   overflow-hidden relative ">
          <div class="overlay bg-custom1-700  bg-opacity-70 p-4 w-full h-full  overflow-y-scroll absolute ">
            <!-- content start -->

            <div class="Addcustomer  customerTab" id="customerTab2">
              <div class="min-h-screen p-6  flex flex-col justify-start bg-Pattern1">
                <div class="container max-w-screen-lg mx-auto">
                  <div>
                    <div class=" rounded   md:p-8 mb-6 ">
                      <div class="grid gap-2 gap-y-2 text-sm grid-cols-1 ">
                        <div class="text-white mb-12">
                          <p class=" text-2xl font-bold">Modify Product Detail</p>
                        </div>
                        <form action="/product/<%=data.Product_ID-50%>" method="post">
                          <div class="lg:col-span-2">
                            <div class="grid gap-4 gap-y-2 text-base grid-cols-1 md:grid-cols-5">
                              <div class="md:col-span-5">
                                <label class="w-32 inline-block" for="Product_Name">Product Name <span
                                    class="text-red-500 text-base font-semibold">*</span></label>
                                <input type="text" name="Product_Name" id="Product_Name"
                                  class="h-10 border mt-1 text-black rounded px-4 w-4/5 bg-gray-500" placeholder="Name"
                                  value="<%=data.Product_Name%>" />
                              </div>
                              <div class="md:col-span-5">
                                <label class="w-32 inline-block" for="Category">Catagory </label>
                                <input type="text" name="Category" id="Category"
                                  class="h-10 border mt-1 text-black rounded px-4 w-4/5 bg-gray-500"
                                  value="<%=data.Category%>" placeholder="email@domain.com" />
                              </div>
                              <div class="md:col-span-5">
                                <label class="w-32 inline-block" for="Price">price <span
                                    class="text-red-500 text-base font-semibold">*</span></label>
                                <input type="text" name="Price" id="Price"
                                  class="h-10 border mt-1 rounded px-4 w-4/5 text-black bg-gray-500"
                                  value="<%=data.Price%>" placeholder="Price" />
                              </div>
                              <div class="md:col-span-5">
                                <label class="w-32 inline-block" for="Description"> Description <span
                                    class="text-red-500 text-base font-semibold">*</span></label>
                                <input type="text" name="Description" id="Description"
                                  class="h-10 border mt-1 rounded px-4 w-4/5 text-black bg-gray-500"
                                  value="<%=data.Description%>" placeholder="This is ..." />
                              </div>
                              <div class="md:col-span-5 text-right mt-10">
                                <div class="inline-flex items-end">
                                  <button type="button" onclick="updateProduct()"
                                    class="bg-custom3-500 hover:bg-custom3-700 text-white font-bold py-2 px-4 rounded mt-4">
                                    Update</button>
                                </div>
                                <div class="inline-flex items-end">
                                  <button type="button" onclick="deleteProduct()"
                                    class="bg-red-400  hover:bg-red-700 text-white font-bold py-2 px-4 rounded mt-4">
                                    Delete</button>
                                </div>
                                <div class="inline-flex items-end">
                                  <button type="button" onclick="window.location.href = '/Product'"
                                    class="bg-custom2-500 hover:bg-custom2-700 text-white font-bold py-2 px-4 rounded mt-4">
                                    Back</button>
                                </div>
                              </div>

                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <script>
              function deleteProduct() {
                let flag = confirm("Are you sure you want to delete this customer?");
                if (flag) {
                  fetch('/Product/<%=data.Product_ID+50%>', {
                    method: 'DELETE'
                  }).then(response => {
                    if (!response) {
                      throw new Error('Network response was not ok');
                    }
                    console.log("deleted & redirected");
                    window.location.href = '/Product';
                  }).catch((error) => {
                    console.error('Error in fetch:', error);
                  });
                }
              }

              function updateProduct() {
                let data={
                  Product_Name:document.getElementById("Product_Name").value,
                  Category:document.getElementById("Category").value,
                  Price:document.getElementById("Price").value,
                  Description:document.getElementById("Description").value
                }

                fetch('/Product/<%=data.Product_ID+50%>', {
                  method: 'put',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(data)
                }).then(response => {
                  if (!response) {
                    throw new Error('Network response was not ok');
                  }
                  console.log("updated & redirected");
                  window.location.href ='/Product';
                }).catch((error) => {
                  console.error('Error in fetch:', error);
                });

              }
            </script>
            <!-- content end-->
          </div>
        </div>
      </main>
      <!-- main star -->
  </div>
  <!-- ======================================================================================================= -->
  <%-include("../Home/footer")-%>